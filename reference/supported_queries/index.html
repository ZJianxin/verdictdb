



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://docs.verdictdb.org/reference/supported_queries/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/verdictdb-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>VerdictDB Queries - VerdictDB Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700|Inconsolata">
        <style>body,input{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Inconsolata","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#verdictdb-queries" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.verdictdb.org/" title="VerdictDB Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/verdictdb-logo-icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              VerdictDB Documentation
            </span>
            <span class="md-header-nav__topic">
              VerdictDB Queries
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/mozafari/verdictdb/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mozafari/verdictdb
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../getting_started/quickstart/" title="Getting Started" class="md-tabs__link">
          Getting Started
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../how_it_works/basics/" title="How it works" class="md-tabs__link">
          How it works
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../tutorial/setup/mysql/" title="Tutorial" class="md-tabs__link">
          Tutorial
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../connection/" title="Reference" class="md-tabs__link">
          Reference
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.verdictdb.org/" title="VerdictDB Documentation" class="md-nav__button md-logo">
      
        <img src="../../images/verdictdb-logo-icon.png" width="48" height="48">
      
    </a>
    VerdictDB Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/mozafari/verdictdb/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mozafari/verdictdb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/quickstart/" title="Quickstart (Java)" class="md-nav__link">
      Quickstart (Java)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/quickstart_python/" title="Quickstart (Python)" class="md-nav__link">
      Quickstart (Python)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/install/" title="Download / Install" class="md-nav__link">
      Download / Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/whatsmore/" title="What's More" class="md-nav__link">
      What's More
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How it works
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How it works
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../how_it_works/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how_it_works/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../how_it_works/query_processing/" title="Query Processing" class="md-nav__link">
      Query Processing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Setup Databases (optional)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Setup Databases (optional)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/setup/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/setup/spark/" title="Apache Spark" class="md-nav__link">
      Apache Spark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/tpch/" title="Load TPC-H Data" class="md-nav__link">
      Load TPC-H Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Example VerdictDB App
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Example VerdictDB App
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/examples/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/examples/spark/" title="Apache Spark" class="md-nav__link">
      Apache Spark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/examples/pyverdict/" title="Pyverdict" class="md-nav__link">
      Pyverdict
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../connection/" title="Connecting to Databases" class="md-nav__link">
      Connecting to Databases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../properties/" title="VerdictDB JDBC Properties" class="md-nav__link">
      VerdictDB JDBC Properties
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scrambling/" title="Creating/Viewing Scrambles" class="md-nav__link">
      Creating/Viewing Scrambles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../append_scrambling/" title="Appending Scrambles" class="md-nav__link">
      Appending Scrambles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../drop_scrambling/" title="Dropping Scrambles" class="md-nav__link">
      Dropping Scrambles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../query_syntax/" title="Select-Query Syntax" class="md-nav__link">
      Select-Query Syntax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../streaming/" title="Stream Querying" class="md-nav__link">
      Stream Querying
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javadoc/" title="Javadoc" class="md-nav__link">
      Javadoc
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mozafari/verdictdb/edit/master/docs/reference/supported_queries.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="verdictdb-queries">VerdictDB Queries<a class="headerlink" href="#verdictdb-queries" title="Permanent link">&para;</a></h1>
<h1 id="supported-queries">Supported queries<a class="headerlink" href="#supported-queries" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Verdict brings significant speedups for many important analytic queries. Before providing a detailed presentation on the queries Verdict can bring speedups, the following summary provides a quick overview.</p>
<ol>
<li>
<p>Verdict brings speedups for the queries including <strong>aggregate functions</strong>.</p>
</li>
<li>
<p>Verdict can speedup most common aggregate functions</p>
</li>
<li>
<p>The only known exceptions are extreme statistics: <code>min</code> and <code>max</code>.</p>
</li>
<li>
<p>Verdict can speedup the queries including joins of multiple tables and subqueries.</p>
</li>
<li>
<p>For relatively simple queries (whose depth is no more than three), Verdict mostly brings speedups.</p>
</li>
<li>
<p>For deeper, complex queries (such as aggregations over aggregations), speedups more depend on Verdict's sample planner.</p>
</li>
<li>
<p>The cost of the worst cases will simply be equivalent to running the original queries.</p>
</li>
</ol>
<h2 id="querying-database-metadata">Querying database metadata<a class="headerlink" href="#querying-database-metadata" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>show databases;
</pre></div>

<p>Displays database names. When Verdict runs on Spark, it displays the tables accessible through <code>HiveContext</code>.</p>
<div class="codehilite"><pre><span></span>use database_name;
</pre></div>

<p>Set the default database to <code>database-name</code>.</p>
<div class="codehilite"><pre><span></span>show tables [in database_name];
</pre></div>

<p>Displays the tables in <code>database-name</code>. If the database name is not specified, the tables in the default database are listed. If <code>database-name</code> is not specified and the default database is not chosen, Verdict throws an error.</p>
<div class="codehilite"><pre><span></span>describe [database_name].table_name;
</pre></div>

<p>Displays the column names and their types.</p>
<div class="codehilite"><pre><span></span>show samples [for database_name];
</pre></div>

<p>Displays the samples created for the tables in the <code>database-name</code>. If <code>database-name</code> is not specified and the database name is not specified, the samples created for the default database are specified. If the default database is not chosen, Verdict throws an error.</p>
<h2 id="creating-samples">Creating samples<a class="headerlink" href="#creating-samples" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>create [XX%] sample of [database_name.]table_name;
</pre></div>

<p>Creates a set of samples for the specified table. <strong>This is the recommended way of creating sample tables.</strong> Verdict analyzes the statistics of the table and automatically creates desired samples. If the sampling probability is omitted, 1% samples are created by default.</p>
<p>Currently, Verdict creates three types of samples using the following rule:</p>
<ol>
<li>
<p>A uniform random sample</p>
</li>
<li>
<p>Stratified samples for low-cardinality columns (distinct-count of a column &lt;= 1% of the total number of tuples).</p>
</li>
<li>
<p>Universe samples for high-cardinality columns (distinct-count of a column &gt; 1% of the total number of tuples).</p>
</li>
</ol>
<p>Find more details on each sample type below.</p>
<div class="codehilite"><pre><span></span>create [XX%] uniform sample of [database_name.]table_name;
</pre></div>

<p>Creates XX% (1% by default) uniform random sample of the specified table.</p>
<p><strong>Uniform random samples</strong> are useful for estimating some basic statistics, such as the number of tuples in a table, average of some expressions, etc., especially when there are no <code>group-by</code> clause.</p>
<div class="codehilite"><pre><span></span>create [XX%] stratified sample of [database_name.]table_name on column_name;
</pre></div>

<p>Creates XX% (1% by default) stratified sample of the specified table.</p>
<p><strong>Stratified samples</strong> ensures that no attribute values are dropped for the column(s) on which the stratified samples are built on. This implies that, in the result set of <code>select group-name, count(*) from t group by group-name</code>, every <code>group-name</code> exists even if Verdict runs the query on a sample. Stratified samples can be very useful when users have some knowledge on what columns will appear frequently in the <code>group-by</code> clause or in the <code>where</code> clause. For example, stratified samples can be very useful for streaming data where each record contains a timestamp. Building a stratified sample on the timestamp will ensure rare events are never dropped in the sampling process. Note that the sampling probabilities for tuples are not uniform in stratified sampling. However, Verdict automatically considers them and produce correct answers.</p>
<div class="codehilite"><pre><span></span>create [XX%] universe sample of [database_name.]table_name on column_name;
</pre></div>

<p>Creates XX% (1% by default) universe sample of the specified table.</p>
<p><strong>Universe samples</strong> are hashing-based sampling. Verdict uses hash functions available in a database system it works with. Universe samples are used for estimating <em>distinct-count</em> of high-cardinality columns. The theory behind using universe samples for <em>distinct-count</em> is closely related to the <code>HyperLogLog algorithm &lt;https://en.wikipedia.org/wiki/HyperLogLog&gt;</code>_. Different from HyperLogLog, however, Verdict's approach uses a sample; thus, it is significantly faster than HyperLogLog or any similar approaches that scan the entire data. Also, universe samples are useful when a query includes joins. The equi-joins of two universe samples (of different tables) built on the join key preserves the cardinality very well; thus, it can produce accurate answers compared to joining two uniform or stratified samples.</p>
<h2 id="analyzing-data-query-structure">Analyzing data: query structure<a class="headerlink" href="#analyzing-data-query-structure" title="Permanent link">&para;</a></h2>
<p>Verdict processes the standard SQL query in the following form::</p>
<div class="codehilite"><pre><span></span>select expr1, expr2, ...
from table_source1, table_source2, ...
[where conditions]
[group by expr1, ...]
[order by expr1]
[limit n;]
</pre></div>


<p>Find more details on the supported statements below.</p>
<h2 id="analyzing-data-aggregate-functions">Analyzing data: aggregate functions<a class="headerlink" href="#analyzing-data-aggregate-functions" title="Permanent link">&para;</a></h2>
<h2 id="supported-aggregate-functions"><strong>Supported</strong> aggregate functions<a class="headerlink" href="#supported-aggregate-functions" title="Permanent link">&para;</a></h2>
<p>Verdict brings speedups for the following aggregate functions or combinations of them:</p>
<ul>
<li>
<ul>
<li>Aggregate function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>count(*)</li>
<li>Counts the number of tuples that satisfy selection conditions in the where clause (if any)</li>
</ul>
</li>
<li>
<ul>
<li>sum(col-name)</li>
<li>Computes the summation of the <em>non-null</em> attribute values in the "col-name" column.</li>
</ul>
</li>
<li>
<ul>
<li>avg(col-name)</li>
<li>Computes the avreage of the <em>non-null</em> attribute values in the "col-name" column.</li>
</ul>
</li>
<li>
<ul>
<li>count(distinct col-name)</li>
<li>Computes the number of distinct attributes in the "col-name" column; only one column can be specified.</li>
</ul>
</li>
</ul>
<h2 id="future-supported-aggregate-functions"><strong>Future supported</strong> aggregate functions<a class="headerlink" href="#future-supported-aggregate-functions" title="Permanent link">&para;</a></h2>
<p>Verdict will be extended to support the following aggregate functions in the future:</p>
<ul>
<li>
<ul>
<li>Aggregate function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>var_pop(col-name)</li>
<li>population variance</li>
</ul>
</li>
<li>
<ul>
<li>var_samp(col-name)</li>
<li>sample variance</li>
</ul>
</li>
<li>
<ul>
<li>stddev_pop(col-name)</li>
<li>population standard deviation</li>
</ul>
</li>
<li>
<ul>
<li>stddev_samp(col-name)</li>
<li>sample standard deviation</li>
</ul>
</li>
<li>
<ul>
<li>covar_pop(col1, col2)</li>
<li>population covariance</li>
</ul>
</li>
<li>
<ul>
<li>covar_samp(col1, col2)</li>
<li>sample covariance</li>
</ul>
</li>
<li>
<ul>
<li>corr(col1, col2)</li>
<li>Pearson correlation coefficient</li>
</ul>
</li>
<li>
<ul>
<li>percentile(col1, p)</li>
<li>p should be within 0.01 and 0.99 for reliable results</li>
</ul>
</li>
</ul>
<h2 id="no-speedup-aggregate-functions"><strong>No-speedup</strong> aggregate functions<a class="headerlink" href="#no-speedup-aggregate-functions" title="Permanent link">&para;</a></h2>
<p>Verdict does not bring speedups (even in the future) for the following extreme statistics:</p>
<ul>
<li>
<ul>
<li>Aggregate function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>min(col-name)</li>
<li>Min of the attribute values in the "col-name" column</li>
</ul>
</li>
<li>
<ul>
<li>max(col-name)</li>
<li>Max of the attribute values in the "col-name" column</li>
</ul>
</li>
</ul>
<p>If a query includes these no-speedup aggregate function(s), Verdict uses the original tables (instead of the sample tables) for processing those queries.</p>
<h2 id="analyzing-data-other-functions">Analyzing data: other functions<a class="headerlink" href="#analyzing-data-other-functions" title="Permanent link">&para;</a></h2>
<p>In general, every (non-aggregate) function that is provided by existing database systems can be processed by Verdict (since Verdict will simply pass those functions to those databases). Please inform us if you want certain functions to be included. We will quickly add them.</p>
<h2 id="mathematical-functions">Mathematical functions<a class="headerlink" href="#mathematical-functions" title="Permanent link">&para;</a></h2>
<ul>
<li>
<ul>
<li>Function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>round(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>floor(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>ceil(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>exp(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>ln(double a)</li>
<li>a natural logarithm</li>
</ul>
</li>
<li>
<ul>
<li>log10(double a)</li>
<li>log with base 10</li>
</ul>
</li>
<li>
<ul>
<li>log2(double a)</li>
<li>log with base 2</li>
</ul>
</li>
<li>
<ul>
<li>sin(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>cos(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>tan(double a)
      -</li>
</ul>
</li>
<li>
<ul>
<li>sign(double a)</li>
<li>Returns the sign of a as '1.0' (if a is positive) or '-1.0' (if a is negative), '0.0' otherwise</li>
</ul>
</li>
<li>
<ul>
<li>pmod(int a, int b)</li>
<li>a mod b; supported for Hive and Spark; See <code>this &lt;page https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF&gt;</code>_ for more information.</li>
</ul>
</li>
<li>
<ul>
<li>a % b</li>
<li>a mod b</li>
</ul>
</li>
<li>
<ul>
<li>rand(int seed)</li>
<li>random number between 0 and 1</li>
</ul>
</li>
<li>
<ul>
<li>abs(double a), abs(int a)</li>
<li>an absolute value</li>
</ul>
</li>
<li>
<ul>
<li>sqrt(double a)
      -</li>
</ul>
</li>
</ul>
<h2 id="string-operators">String operators<a class="headerlink" href="#string-operators" title="Permanent link">&para;</a></h2>
<ul>
<li>
<ul>
<li>Function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>conv(int num, int from_base, int to_base), conv(string num, int from_base, int to_base)</li>
<li>Converts a number from a given base to another; supported for Hive and Spark</li>
</ul>
</li>
<li>
<ul>
<li>substr(string a, int start, int len)</li>
<li>Returns the portion of the string starting at a specified point with a specified maximum length.</li>
</ul>
</li>
</ul>
<h2 id="other-functions">Other functions<a class="headerlink" href="#other-functions" title="Permanent link">&para;</a></h2>
<ul>
<li>
<ul>
<li>Function</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>fnv_hash(expr)</li>
<li>Returns a consistent 64-bit value derived from the input argument; supported for Impala; See <code>this page &lt;https://www.cloudera.com/documentation/enterprise/5-8-x/topics/impala_math_functions.html&gt;</code>_ for more information.</li>
</ul>
</li>
<li>
<ul>
<li>md5(expr)</li>
<li>Calculates an MD5 128-bit checksum for the string or binary; supported for Hive and Spark</li>
</ul>
</li>
<li>
<ul>
<li>crc32(expr)</li>
<li>Computes a cyclic redundancy check value for string or binary argument and returns bigint value; supported for Hive and Spark</li>
</ul>
</li>
</ul>
<h2 id="analyzing-data-table-sources-filtering-predicates-etc">Analyzing data: table sources, filtering predicates, etc.<a class="headerlink" href="#analyzing-data-table-sources-filtering-predicates-etc" title="Permanent link">&para;</a></h2>
<h2 id="table-sources">Table sources<a class="headerlink" href="#table-sources" title="Permanent link">&para;</a></h2>
<p>You can use a single base table, equi-joined tables, or derived tables in the from clause. Verdict's sample planner automatically finds the best set of sample tables to process your queries. However, if samples must not be used for processing your queries (due to unguaranteed accuracy), Verdict will use the original tables.</p>
<p>Verdict's sample planner is rather involved, so we will make a separate document for its description.</p>
<p><strong>Note</strong>: Verdict's query parser currently processes only inner joins, but it will be extended to process left outer and right outer joins.</p>
<h2 id="filtering-predicates-ie-in-the-where-clause">Filtering predicates (i.e., in the where clause)<a class="headerlink" href="#filtering-predicates-ie-in-the-where-clause" title="Permanent link">&para;</a></h2>
<ul>
<li>
<ul>
<li>Predicate</li>
<li>Description</li>
</ul>
</li>
<li>
<ul>
<li>p1 AND p2</li>
<li>logical and of two predicates, p1 and p2</li>
</ul>
</li>
<li>
<ul>
<li>p1 OR p2</li>
<li>logical or of two predicates, p1 and p2</li>
</ul>
</li>
<li>
<ul>
<li>expr1 COMP expr2</li>
<li>comparison of two expressions, expr1 and expr2, using the comparison operator, COMP. The available comparison operators are =, &gt;, &lt;, &lt;=, &gt;=, &lt;&gt;, !=, !&gt;, !&lt;, &lt;=, &gt;=, &lt;, &gt;, !&gt;, !&lt;</li>
</ul>
</li>
<li>
<ul>
<li>expr COMP (subquery)</li>
<li>comparison of the value of expr and the value of subquery. The subquery must return a single row and a single column</li>
</ul>
</li>
<li>
<ul>
<li>expr1 NOT? BETWEEN expr2 AND expr3</li>
<li>returns true if the value of expr1 is between the value of expr2 and the value of expr3.</li>
</ul>
</li>
<li>
<ul>
<li>expr1 NOT? LIKE expr2</li>
<li>text pattern search using wild cards. See <code>this page &lt;https://www.w3schools.com/sql/sql_like.asp&gt;</code>_ for more information.</li>
</ul>
</li>
<li>
<ul>
<li>expr IS NOT? NULL</li>
<li>test if the value of the expression is null.</li>
</ul>
</li>
</ul>
<h2 id="dropping-samples">Dropping samples<a class="headerlink" href="#dropping-samples" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>(delete | drop) [XX%] samples of [database-name.]table-name;
</pre></div>

<p>Drop all the samples created for the specified table. The sampling ratio is 1% is not specified explicitly.</p>
<div class="codehilite"><pre><span></span>(delete | drop) [XX%] uniform samples of [database-name.]table-name;
</pre></div>

<p>Drop the uniform random sample created for the specified table. The sampling ratio is 1% is not specified explicitly.</p>
<div class="codehilite"><pre><span></span>(delete | drop) [XX%] stratified samples of [database-name.]table-name on column-name;
</pre></div>

<p>Drop the stratified sample created for the specified table. The sampling ratio is 1% is not specified explicitly.</p>
<div class="codehilite"><pre><span></span>(delete | drop) [XX%] universe samples of [database-name.]table-name on column-name;
</pre></div>

<p>Drop the universe sample created for the specified table. The sampling ratio is 1% is not specified explicitly.</p>
<p><em>(Later, Yongjoo will update the content)</em></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 The University of Michigan
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>